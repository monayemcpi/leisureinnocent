jQuery(function($){var load_selectWoo=true;var address_book=$("select#shipping_address_book:visible, select#billing_address_book:visible");if($.fn.selectize){if(address_book.hasClass("selectized")&&address_book[0]&&address_book[0].selectize){load_selectWoo=false}}if(load_selectWoo){if($.fn.selectWoo){address_book.selectWoo()}else if($.fn.select2){address_book.select2()}}$.blockUI.defaults.message=null;$.blockUI.defaults.overlayCSS.backgroundColor="#fff";checkout_field_prepop("billing");$("#billing_address_book_field #billing_address_book").on("change",function(){checkout_field_prepop("billing")});if($("form[name=checkout]").length>0&&($("#shipping_country").val()!==""||$("#shipping_state").val()!==""||$("#shipping_city").val()!==""||$("#shipping_postcode").val()!=="")){shipping_country_o=$("#shipping_country").val();shipping_state_o=$("#shipping_state").val();shipping_city_o=$("#shipping_city").val();shipping_postcode_o=$("#shipping_postcode").val()}checkout_field_prepop("shipping");$("#shipping_address_book_field #shipping_address_book").on("change",function(){checkout_field_prepop("shipping")});if($("form[name=checkout]").length>0){$("#shipping_country, #shipping_state_field, #shipping_city, #shipping_postcode, #billing_country, #billing_state_field, #billing_city, #billing_postcode").on("change",function(){$(document.body).trigger("update_checkout")})}$("a.wc-address-book-delete").on("click",function(e){e.preventDefault();var confirmDelete=confirm(woo_address_book.delete_confirmation);if(!confirmDelete){return}var name=$(this).attr("id");var toRemove=$(this).closest(".wc-address-book-address");$(".woocommerce-MyAccount-content").block();$.ajax({url:woo_address_book.ajax_url,type:"post",data:{action:"wc_address_book_delete",name:name,nonce:woo_address_book.delete_security},success:function(){toRemove.remove();$(".woocommerce-MyAccount-content").unblock()}})});$("a.wc-address-book-make-primary").on("click",function(e){e.preventDefault();var name=$(this).attr("id");var type=name.replace(/\d+/g,"");if(type==="billing"){var primary_address=$(".u-column1.woocommerce-Address address")}else if(type==="shipping"){var primary_address=$(".u-column2.woocommerce-Address address")}else{return}var alt_address=$(this).parent().siblings("address");var pa_html=primary_address.html();var aa_html=alt_address.html();$(".woocommerce-MyAccount-content").block();$.ajax({url:woo_address_book.ajax_url,type:"post",data:{action:"wc_address_book_make_primary",name:name,nonce:woo_address_book.primary_security},success:function(){alt_address.html(pa_html);primary_address.html(aa_html);$(".woocommerce-MyAccount-content").unblock()}})});function checkout_field_prepop(addressType){let countryInputName=addressType+"_country";let that=$("#"+addressType+"_address_book_field #"+addressType+"_address_book");let name=$(that).val();if(name!==undefined&&name!==null){if("add_new"===name){$(".woocommerce-"+addressType+"-fields__field-wrapper input").not($("#"+countryInputName)).not("#"+addressType+"_address_book").each(function(){var input=$(this);if(input.attr("type")==="checkbox"||input.attr("type")==="radio"){input.prop("checked",false)}else{input.val("")}});$(".woocommerce-"+addressType+"-fields__field-wrapper select").not($("#"+countryInputName)).not("#"+addressType+"_address_book").each(function(){var input=$(this);if(input.hasClass("selectized")&&input[0]&&input[0].selectize){input[0].selectize.setValue("")}else{input.val("").trigger("change")}});if(addressType==="shipping"&&typeof shipping_country_o!=="undefined"&&typeof shipping_state_o!=="undefined"&&typeof shipping_city_o!=="undefined"&&typeof shipping_postcode_o!=="undefined"){$("#shipping_country").val(shipping_country_o).trigger("change");$("#shipping_state").val(shipping_state_o).trigger("change");$("#shipping_city").val(shipping_city_o);$("#shipping_postcode").val(shipping_postcode_o);delete shipping_country_o;delete shipping_state_o;delete shipping_city_o;delete shipping_postcode_o;$(".woocommerce-shipping-fields").unblock()}return}if(name.length>0){$(".woocommerce-"+addressType+"-fields").block();$.ajax({url:woo_address_book.ajax_url,type:"post",data:{action:"wc_address_book_checkout_update",name:name,type:addressType,nonce:woo_address_book.checkout_security},dataType:"json",success:function(response){if(addressType==="shipping"&&typeof shipping_country_o!=="undefined"&&typeof shipping_state_o!=="undefined"&&typeof shipping_city_o!=="undefined"&&typeof shipping_postcode_o!=="undefined"){if(shipping_country_o!==response.shipping_country||shipping_state_o!==response.shipping_state||shipping_city_o!==response.shipping_city||shipping_postcode_o!==response.shipping_postcode){$("#shipping_address_book").val("add_new").trigger("change");return}}Object.keys(response).forEach(function(key){let input=$("#"+key);if(input.length>0){if(input.attr("readonly")!=="readonly"){if(input.is("select")){if(input.hasClass("selectized")&&input[0]&&input[0].selectize){input[0].selectize.setValue(response[key])}else{input.val(response[key]).trigger("change")}}else if(input.attr("type")==="checkbox"){input.prop("checked",response[key]==="1").trigger("change")}else{input.val(response[key]).trigger("change")}}}else{let radio_field=$("#"+key+"_field");if(radio_field.length>0){radio_field.find("input[type='radio']").each(function(index,radio_button){if($(radio_button).val()===response[key]){$(radio_button).prop("checked",true).trigger("change")}})}}});$(".woocommerce-"+addressType+"-fields").unblock()}})}}}});
